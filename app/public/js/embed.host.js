(()=>{var He=Object.create;var ve=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Ae=Object.getPrototypeOf,Be=Object.prototype.hasOwnProperty;var qe=(b,p)=>()=>(p||b((p={exports:{}}).exports,p),p.exports);var Ve=(b,p,I,j)=>{if(p&&typeof p=="object"||typeof p=="function")for(let C of je(p))!Be.call(b,C)&&C!==I&&ve(b,C,{get:()=>p[C],enumerable:!(j=Se(p,C))||j.enumerable});return b};var Ue=(b,p,I)=>(I=b!=null?He(Ae(b)):{},Ve(p||!b||!b.__esModule?ve(I,"default",{value:b,enumerable:!0}):I,b));var Fe=qe((Ye,V)=>{(function(b){if(typeof window=="undefined")return;var p=0,I=!1,j=!1,C="message",ke=C.length,A="[iFrameSizer]",U=A.length,F=null,W=window.requestAnimationFrame,ze={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},n={},J=null,B={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){k("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}};function re(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function S(e,t,c){e.addEventListener(t,c,!1)}function Oe(e,t,c){e.removeEventListener(t,c,!1)}function xe(){var e=["moz","webkit","o","ms"],t;for(t=0;t<e.length&&!W;t+=1)W=window[e[t]+"RequestAnimationFrame"];W?W=W.bind(window):l("setup","RequestAnimationFrame not supported")}function Re(e){var t="Host page: "+e;return window.top!==window.self&&(t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}function Ee(e){return A+"["+Re(e)+"]"}function ae(e){return n[e]?n[e].log:I}function l(e,t){Q("log",e,t,ae(e))}function se(e,t){Q("info",e,t,ae(e))}function k(e,t){Q("warn",e,t,!0)}function Q(e,t,c,o){o===!0&&typeof window.console=="object"&&console[e](Ee(t),c)}function Te(e){function t(){function i(){ge(g),fe(s),H("onResized",g)}f("Height"),f("Width"),he(i,g,"init")}function c(){var i=O.substr(U).split(":"),u=i[1]?parseInt(i[1],10):0,h=n[i[0]]&&n[i[0]].iframe,m=getComputedStyle(h);return{iframe:h,id:i[0],height:u+o(m)+d(m),width:i[2],type:i[3]}}function o(i){if(i.boxSizing!=="border-box")return 0;var u=i.paddingTop?parseInt(i.paddingTop,10):0,h=i.paddingBottom?parseInt(i.paddingBottom,10):0;return u+h}function d(i){if(i.boxSizing!=="border-box")return 0;var u=i.borderTopWidth?parseInt(i.borderTopWidth,10):0,h=i.borderBottomWidth?parseInt(i.borderBottomWidth,10):0;return u+h}function f(i){var u=Number(n[s]["max"+i]),h=Number(n[s]["min"+i]),m=i.toLowerCase(),y=Number(g[m]);l(s,"Checking "+m+" is in range "+h+"-"+u),y<h&&(y=h,l(s,"Set "+m+" to min value")),y>u&&(y=u,l(s,"Set "+m+" to max value")),g[m]=""+y}function R(){function i(){function m(){var M=0,P=!1;for(l(s,"Checking connection is from allowed list of origins: "+h);M<h.length;M++)if(h[M]===u){P=!0;break}return P}function y(){var M=n[s]&&n[s].remoteHost;return l(s,"Checking connection is from: "+M),u===M}return h.constructor===Array?m():y()}var u=e.origin,h=n[s]&&n[s].checkOrigin;if(h&&""+u!="null"&&!i())throw new Error("Unexpected message received from: "+u+" for "+g.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function L(){return A===(""+O).substr(0,U)&&O.substr(U).split(":")[0]in n}function E(){var i=g.type in{true:1,false:1,undefined:1};return i&&l(s,"Ignoring init message from meta parent page"),i}function T(i){return O.substr(O.indexOf(":")+ke+i)}function N(i){l(s,"onMessage passed: {iframe: "+g.iframe.id+", message: "+i+"}"),H("onMessage",{iframe:g.iframe,message:JSON.parse(i)}),l(s,"--")}function _(){var i=document.body.getBoundingClientRect(),u=g.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:u.height,iframeWidth:u.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(u.top-i.top,10),offsetLeft:parseInt(u.left-i.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function q(i,u){function h(){x("Send Page Info","pageInfo:"+_(),i,u)}Ie(h,32,u)}function D(){function i(y,M){function P(){n[m]?q(n[m].iframe,m):u()}["scroll","resize"].forEach(function(ye){l(m,y+ye+" listener for sendPageInfo"),M(window,ye,P)})}function u(){i("Remove ",Oe)}function h(){i("Add ",S)}var m=s;h(),n[m]&&(n[m].stopPageInfo=u)}function $(){n[s]&&n[s].stopPageInfo&&(n[s].stopPageInfo(),delete n[s].stopPageInfo)}function ee(){var i=!0;return g.iframe===null&&(k(s,"IFrame ("+g.id+") not found"),i=!1),i}function a(i){var u=i.getBoundingClientRect();return ce(s),{x:Math.floor(Number(u.left)+Number(F.x)),y:Math.floor(Number(u.top)+Number(F.y))}}function r(i){function u(){F=M,w(),l(s,"--")}function h(){return{x:Number(g.width)+y.x,y:Number(g.height)+y.y}}function m(){window.parentIFrame?window.parentIFrame["scrollTo"+(i?"Offset":"")](M.x,M.y):k(s,"Unable to scroll to requested position, window.parentIFrame not found")}var y=i?a(g.iframe):{x:0,y:0},M=h();l(s,"Reposition requested from iFrame (offset x:"+y.x+" y:"+y.y+")"),window.top!==window.self?m():u()}function w(){H("onScroll",F)!==!1?fe(s):le()}function v(i){function u(){var P=a(M);l(s,"Moving to in page link (#"+m+") at x: "+P.x+" y: "+P.y),F={x:P.x,y:P.y},w(),l(s,"--")}function h(){window.parentIFrame?window.parentIFrame.moveToAnchor(m):l(s,"In page link #"+m+" not found and window.parentIFrame not found")}var m=i.split("#")[1]||"",y=decodeURIComponent(m),M=document.getElementById(y)||document.getElementsByName(y)[0];M?u():window.top!==window.self?h():l(s,"In page link #"+m+" not found")}function z(i){var u={};if(Number(g.width)===0&&Number(g.height)===0){var h=T(9).split(":");u={x:h[1],y:h[0]}}else u={x:g.width,y:g.height};H(i,{iframe:g.iframe,screenX:Number(u.x),screenY:Number(u.y),type:g.type})}function H(i,u){return X(s,i,u)}function ne(){switch(n[s]&&n[s].firstRun&&oe(),g.type){case"close":Y(g.iframe);break;case"message":N(T(6));break;case"mouseenter":z("onMouseEnter");break;case"mouseleave":z("onMouseLeave");break;case"autoResize":n[s].autoResize=JSON.parse(T(9));break;case"scrollTo":r(!1);break;case"scrollToOffset":r(!0);break;case"pageInfo":q(n[s]&&n[s].iframe,s),D();break;case"pageInfoStop":$();break;case"inPageLink":v(T(9));break;case"reset":de(g);break;case"init":t(),H("onInit",g.iframe);break;default:Number(g.width)===0&&Number(g.height)===0?k("Unsupported message received ("+g.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):t()}}function te(i){var u=!0;return n[i]||(u=!1,k(g.type+" No settings for "+i+". Message was: "+O)),u}function ie(){for(var i in n)x("iFrame requested init",me(i),n[i].iframe,i)}function oe(){n[s]&&(n[s].firstRun=!1)}var O=e.data,g={},s=null;O==="[iFrameResizerChild]Ready"?ie():L()?(g=c(),s=g.id,n[s]&&(n[s].loaded=!0),!E()&&te(s)&&(l(s,"Received: "+O),ee()&&R()&&ne())):se(s,"Ignored: "+O)}function X(e,t,c){var o=null,d=null;if(n[e])if(o=n[e][t],typeof o=="function")d=o(c);else throw new TypeError(t+" on iFrame["+e+"] is not a function");return d}function ue(e){var t=e.id;delete n[t]}function Y(e){var t=e.id;if(X(t,"onClose",t)===!1){l(t,"Close iframe cancelled by onClose event");return}l(t,"Removing iFrame: "+t);try{e.parentNode&&e.parentNode.removeChild(e)}catch(c){k(c)}X(t,"onClosed",t),l(t,"--"),ue(e)}function ce(e){F===null&&(F={x:window.pageXOffset!==b?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==b?window.pageYOffset:document.documentElement.scrollTop},l(e,"Get page position: "+F.x+","+F.y))}function fe(e){F!==null&&(window.scrollTo(F.x,F.y),l(e,"Set page position: "+F.x+","+F.y),le())}function le(){F=null}function de(e){function t(){ge(e),x("reset","reset",e.iframe,e.id)}l(e.id,"Size reset requested by "+(e.type==="init"?"host page":"iFrame")),ce(e.id),he(t,e,"reset")}function ge(e){function t(f){if(!e.id){l("undefined","messageData id not set");return}e.iframe.style[f]=e[f]+"px",l(e.id,"IFrame ("+d+") "+f+" set to "+e[f]+"px")}function c(f){!j&&e[f]==="0"&&(j=!0,l(d,"Hidden iFrame detected, creating visibility listener"),Ne())}function o(f){t(f),c(f)}var d=e.iframe.id;n[d]&&(n[d].sizeHeight&&o("height"),n[d].sizeWidth&&o("width"))}function he(e,t,c){c!==t.type&&W&&!window.jasmine?(l(t.id,"Requesting animation frame"),W(e)):e()}function x(e,t,c,o,d){function f(){var N=n[o]&&n[o].targetOrigin;l(o,"["+e+"] Sending msg to iframe["+o+"] ("+t+") targetOrigin: "+N),c.contentWindow.postMessage(A+t,N)}function R(){k(o,"["+e+"] IFrame("+o+") not found")}function L(){c&&"contentWindow"in c&&c.contentWindow!==null?f():R()}function E(){function N(){n[o]&&!n[o].loaded&&!T&&(T=!0,k(o,"IFrame has not responded within "+n[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}d&&n[o]&&n[o].warningTimeout&&(n[o].msgTimeout=setTimeout(N,n[o].warningTimeout))}var T=!1;o=o||c.id,n[o]&&(L(),E())}function me(e){return e+":"+n[e].bodyMarginV1+":"+n[e].sizeWidth+":"+n[e].log+":"+n[e].interval+":"+n[e].enablePublicMethods+":"+n[e].autoResize+":"+n[e].bodyMargin+":"+n[e].heightCalculationMethod+":"+n[e].bodyBackground+":"+n[e].bodyPadding+":"+n[e].tolerance+":"+n[e].inPageLinks+":"+n[e].resizeFrom+":"+n[e].widthCalculationMethod+":"+n[e].mouseEvents}function Pe(e){return typeof e=="number"}function be(e,t){function c(){function r(v){var z=n[a][v];z!==1/0&&z!==0&&(e.style[v]=Pe(z)?z+"px":z,l(a,"Set "+v+" = "+e.style[v]))}function w(v){if(n[a]["min"+v]>n[a]["max"+v])throw new Error("Value for min"+v+" can not be greater than max"+v)}w("Height"),w("Width"),r("maxHeight"),r("minHeight"),r("maxWidth"),r("minWidth")}function o(){var r=t&&t.id||B.id+p++;return document.getElementById(r)!==null&&(r+=p++),r}function d(r){return r===""&&(e.id=r=o(),I=(t||{}).log,l(r,"Added missing iframe ID: "+r+" ("+e.src+")")),r}function f(){switch(l(a,"IFrame scrolling "+(n[a]&&n[a].scrolling?"enabled":"disabled")+" for "+a),e.style.overflow=(n[a]&&n[a].scrolling)===!1?"hidden":"auto",n[a]&&n[a].scrolling){case"omit":break;case!0:e.scrolling="yes";break;case!1:e.scrolling="no";break;default:e.scrolling=n[a]?n[a].scrolling:"no"}}function R(){(typeof(n[a]&&n[a].bodyMargin)=="number"||(n[a]&&n[a].bodyMargin)==="0")&&(n[a].bodyMarginV1=n[a].bodyMargin,n[a].bodyMargin=""+n[a].bodyMargin+"px")}function L(){var r=n[a]&&n[a].firstRun,w=n[a]&&n[a].heightCalculationMethod in ze;!r&&w&&de({iframe:e,height:0,width:0,type:"init"})}function E(){n[a]&&(n[a].iframe.iFrameResizer={close:Y.bind(null,n[a].iframe),removeListeners:ue.bind(null,n[a].iframe),resize:x.bind(null,"Window resize","resize",n[a].iframe),moveToAnchor:function(r){x("Move to anchor","moveToAnchor:"+r,n[a].iframe,a)},sendMessage:function(r){r=JSON.stringify(r),x("Send Message","message:"+r,n[a].iframe,a)}})}function T(r){function w(){x("iFrame.onload",r,e,b,!0),L()}function v(H){if(e.parentNode){var ne=new H(function(te){te.forEach(function(ie){var oe=Array.prototype.slice.call(ie.removedNodes);oe.forEach(function(O){O===e&&Y(e)})})});ne.observe(e.parentNode,{childList:!0})}}var z=re();z&&v(z),S(e,"load",w),x("init",r,e,b,!0)}function N(r){if(typeof r!="object")throw new TypeError("Options is not an object")}function _(r){for(var w in B)Object.prototype.hasOwnProperty.call(B,w)&&(n[a][w]=Object.prototype.hasOwnProperty.call(r,w)?r[w]:B[w])}function q(r){return r===""||r.match(/^(about:blank|javascript:|file:\/\/)/)!==null?"*":r}function D(r){var w=r.split("Callback");if(w.length===2){var v="on"+w[0].charAt(0).toUpperCase()+w[0].slice(1);this[v]=this[r],delete this[r],k(a,"Deprecated: '"+r+"' has been renamed '"+v+"'. The old method will be removed in the next major version.")}}function $(r){r=r||{},n[a]={firstRun:!0,iframe:e,remoteHost:e.src&&e.src.split("/").slice(0,3).join("/")},N(r),Object.keys(r).forEach(D,r),_(r),n[a]&&(n[a].targetOrigin=n[a].checkOrigin===!0?q(n[a].remoteHost):"*")}function ee(){return a in n&&"iFrameResizer"in e}var a=d(e.id);ee()?k(a,"Ignored iFrame, already setup."):($(t),f(),c(),R(),T(me(a)),E())}function G(e,t){J===null&&(J=setTimeout(function(){J=null,e()},t))}var K={};function Ie(e,t,c){K[c]||(K[c]=setTimeout(function(){K[c]=null,e()},t))}function Ne(){function e(){function d(f){function R(E){return(n[f]&&n[f].iframe.style[E])==="0px"}function L(E){return E.offsetParent!==null}n[f]&&L(n[f].iframe)&&(R("height")||R("width"))&&x("Visibility change","resize",n[f].iframe,f)}Object.keys(n).forEach(function(f){d(f)})}function t(d){l("window","Mutation observed: "+d[0].target+" "+d[0].type),G(e,16)}function c(){var d=document.querySelector("body"),f={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},R=new o(t);R.observe(d,f)}var o=re();o&&c()}function Ce(e){function t(){we("Window "+e,"resize")}l("window","Trigger event: "+e),G(t,16)}function pe(){function e(){we("Tab Visable","resize")}document.visibilityState!=="hidden"&&(l("document","Trigger event: Visiblity change"),G(e,16))}function we(e,t){function c(o){return n[o]&&n[o].resizeFrom==="parent"&&n[o].autoResize&&!n[o].firstRun}Object.keys(n).forEach(function(o){c(o)&&x(e,t,n[o].iframe,o)})}function We(){S(window,"message",Te),S(window,"resize",function(){Ce("resize")}),S(document,"visibilitychange",pe),S(document,"-webkit-visibilitychange",pe)}function Z(){function e(o,d){function f(){if(d.tagName){if(d.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+d.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}d&&(f(),be(d,o),c.push(d))}function t(o){o&&o.enablePublicMethods&&k("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var c;return xe(),We(),function(d,f){switch(c=[],t(d),typeof f){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(f||"iframe"),e.bind(b,d));break;case"object":e(d,f);break;default:throw new TypeError("Unexpected data type ("+typeof f+")")}return c}}function Le(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(c){function o(d,f){be(f,c)}return this.filter("iframe").each(o).end()}):se("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&Le(window.jQuery),typeof define=="function"&&define.amd?define([],Z):typeof V=="object"&&typeof V.exports=="object"&&(V.exports=Z()),window.iFrameResize=window.iFrameResize||Z()})()});var Me=Ue(Fe()),Je=(0,Me.default)({heightCalculationMethod:"taggedElement",onInit:Qe,checkOrigin:!1},"[plausible-embed]");function Qe(){var b=Je[0],p=b.getAttribute("styles");p&&b.iFrameResizer.sendMessage({type:"load-custom-styles",opts:{styles:p}})}})();
